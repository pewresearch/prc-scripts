!function(){"use strict";function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,a){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t(e,a)}var a,n,i,r,s=window.React,h="hcaptcha-api-script-id",o="hcaptchaOnLoad",c=new Promise((function(e,t){a=e,n=t})),p=function(i){var r,p;function d(t){var a;(a=i.call(this,t)||this).renderCaptcha=a.renderCaptcha.bind(e(a)),a.resetCaptcha=a.resetCaptcha.bind(e(a)),a.removeCaptcha=a.removeCaptcha.bind(e(a)),a.isReady=a.isReady.bind(e(a)),a.loadCaptcha=a.loadCaptcha.bind(e(a)),a.handleOnLoad=a.handleOnLoad.bind(e(a)),a.handleSubmit=a.handleSubmit.bind(e(a)),a.handleExpire=a.handleExpire.bind(e(a)),a.handleError=a.handleError.bind(e(a)),a.handleOpen=a.handleOpen.bind(e(a)),a.handleClose=a.handleClose.bind(e(a)),a.handleChallengeExpired=a.handleChallengeExpired.bind(e(a));var n="undefined"!=typeof hcaptcha;return a.ref=s.createRef(),a.apiScriptRequested=!1,a.state={isApiReady:n,isRemoved:!1,elementId:t.id,captchaId:""},a}p=i,(r=d).prototype=Object.create(p.prototype),r.prototype.constructor=r,t(r,p);var l=d.prototype;return l.componentDidMount=function(){this.state.isApiReady?this.renderCaptcha():this.loadCaptcha()},l.componentWillUnmount=function(){var e=this.state.captchaId;this.isReady()&&(hcaptcha.reset(e),hcaptcha.remove(e))},l.shouldComponentUpdate=function(e,t){return this.state.isApiReady===t.isApiReady&&this.state.isRemoved===t.isRemoved},l.componentDidUpdate=function(e){var t=this;["sitekey","size","theme","tabindex","languageOverride","endpoint"].every((function(a){return e[a]===t.props[a]}))||this.removeCaptcha((function(){t.renderCaptcha()}))},l.loadCaptcha=function(){if(!this.apiScriptRequested){var e=this.props,t=e.apihost,i=e.assethost,r=e.endpoint,s=e.host,p=e.imghost;(function(e){if(void 0===e&&(e={}),document.getElementById(h))return c;window[o]=a;var t=e.apihost||"https://js.hcaptcha.com";delete e.apihost;var i=document.createElement("script");i.id=h,i.src=t+"/1/api.js?render=explicit&onload="+o,i.async=!0,i.onerror=function(e){return n("script-error")};var r=function(e){return Object.entries(e).filter((function(e){e[0];var t=e[1];return t||!1===t})).map((function(e){var t=e[0],a=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(a)})).join("&")}(e);return i.src+=""!==r?"&"+r:"",document.head.appendChild(i),c})({apihost:t,assethost:i,endpoint:r,hl:e.languageOverride,host:s,imghost:p,recaptchacompat:!1===e.reCaptchaCompat?"off":null,reportapi:e.reportapi,sentry:e.sentry,custom:e.custom}).then(this.handleOnLoad).catch(this.handleError),this.apiScriptRequested=!0}},l.renderCaptcha=function(e){if(this.state.isApiReady){var t=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),a=hcaptcha.render(this.ref.current,t);this.setState({isRemoved:!1,captchaId:a},(function(){e&&e()}))}},l.resetCaptcha=function(){var e=this.state.captchaId;this.isReady()&&hcaptcha.reset(e)},l.removeCaptcha=function(e){var t=this.state.captchaId;this.isReady()&&this.setState({isRemoved:!0},(function(){hcaptcha.remove(t),e&&e()}))},l.handleOnLoad=function(){var e=this;this.setState({isApiReady:!0},(function(){e.renderCaptcha((function(){var t=e.props.onLoad;t&&t()}))}))},l.handleSubmit=function(e){var t=this.props.onVerify,a=this.state,n=a.isRemoved,i=a.captchaId;"undefined"==typeof hcaptcha||n||t(hcaptcha.getResponse(i),hcaptcha.getRespKey(i))},l.handleExpire=function(){var e=this.props.onExpire,t=this.state.captchaId;this.isReady()&&(hcaptcha.reset(t),e&&e())},l.handleError=function(e){var t=this.props.onError,a=this.state.captchaId;this.isReady()&&hcaptcha.reset(a),t&&t(e)},l.isReady=function(){var e=this.state,t=e.isApiReady,a=e.isRemoved;return t&&!a},l.handleOpen=function(){this.isReady()&&this.props.onOpen&&this.props.onOpen()},l.handleClose=function(){this.isReady()&&this.props.onClose&&this.props.onClose()},l.handleChallengeExpired=function(){this.isReady()&&this.props.onChalExpired&&this.props.onChalExpired()},l.execute=function(e){void 0===e&&(e=null);var t=this.state.captchaId;if(this.isReady())return e&&"object"!=typeof e&&(e=null),hcaptcha.execute(t,e)},l.setData=function(e){var t=this.state.captchaId;this.isReady()&&(e&&"object"!=typeof e&&(e=null),hcaptcha.setData(t,e))},l.getResponse=function(){return hcaptcha.getResponse(this.state.captchaId)},l.getRespKey=function(){return hcaptcha.getRespKey(this.state.captchaId)},l.render=function(){var e=this.state.elementId;return s.createElement("div",{ref:this.ref,id:e})},d}(s.Component);i="hcaptcha",r=p,window[i]||(window[i]=r)}();